<?xml version="1.0" encoding="UTF-8"?>
<DataService xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../DataService.xsd">

	<!-- 新增LoginLog -->
	<SQLTrans TransFlag="1" TransName="saveLoginRecord" DataGroupId="writeUser">
		<Insert>
			<OutputSQL>insert into loginRecord (userName,loginResult,loginDesc,loginInfo,loginDate,createTime) values({userName},{loginResult},{loginDesc},{loginInfo},{loginDate},{currentTime})</OutputSQL>
		</Insert>
		<OnException>
			<Return Code="-1" Info="新增LoginLog数据库异常" Text="新增LoginLog数据库异常"/>
		</OnException>
		<Return Code="0" Info="新增LoginLog成功" Text="新增LoginLog成功"/>
	</SQLTrans>

	<!-- 分页查询LoginLog -->
	<SQLTrans TransFlag="0" TransName="queryLoginLogPage" DataGroupId="readUser" >
		<SelectField OutputId="{totalCount}">
			<OutputSQL>select count(*) from loginLog where 1=1 </OutputSQL>
			<SQLIf Value1="{userName}" Type="String" Operator="EXIST">
				<SQLThen><OutputSQL>  and userName = {userName}</OutputSQL></SQLThen>
			</SQLIf>
		</SelectField>
		<SelectRecordSet OutputId="{loginLogs}">
			<OutputSQL>select * from loginLog where 1=1 </OutputSQL>
			<SQLIf Value1="{userName}" Type="String" Operator="EXIST">
				<SQLThen><OutputSQL>  and userName = {userName}</OutputSQL></SQLThen>
			</SQLIf>		
			<OutputSQL> limit {startIndex},{pageSize}</OutputSQL>
		</SelectRecordSet>
		<OnException>
			<Return Code="-1" Text="查询LoginLog信息异常" Info="LoginLogService.xml.queryPage(i)"></Return>
		</OnException>
		<Return Code="0" Text="查询LoginLog信息成功" Info="查询LoginLog信息成功">
			<ReturnItem FieldId="{pageNumber}" ValueId="{pageNumber}"/>
			<ReturnItem FieldId="{pageSize}" ValueId="{pageSize}"/>
			<ReturnItem FieldId="{totalCount}" ValueId="{totalCount}"/>
			<ReturnItem FieldId="{list}" ValueId="{loginLogs}"/>
		</Return>
	</SQLTrans>	
	
	<SQLTrans TransFlag="0" TransName="queryLoginLogById" DataGroupId="readUser" >
		<SelectRecord OutputId="{loginLog}">
			<OutputSQL>select * from loginLog where id={id} </OutputSQL>
		</SelectRecord>
		<OnException>
			<Return Code="-1" Text="查询LoginLog信息异常" Info="LoginLogService.xml.queryById(i)"></Return>
		</OnException>
		<Return Code="0" Text="查询LoginLog信息成功" Info="查询LoginLog信息成功">
			<ReturnItem FieldId="{loginLog}" ValueId="{loginLog}"/>
		</Return>
	</SQLTrans>		
</DataService>